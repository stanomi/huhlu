<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUHLU Weight Loss Challenge</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #31326F 0%, #637AB3 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .bonus-goal {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            color: white;
            text-align: center;
            font-size: 1.1em;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .stat-card h3 {
            color: #31326F;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
            color: #333;
        }
        
        .leaderboard {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .leaderboard h2 {
            color: #31326F;
            margin-bottom: 20px;
            font-size: 1.55em;
        }
        
        .participant {
            display: flex;
            flex-direction: column;
            padding: 20px;
            margin-bottom: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: transform 0.2s;
        }
        
        .participant:hover {
            transform: translateX(5px);
            background: #e9ecef;
        }
        
        .participant-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .rank {
            font-size: 1.5em;
            font-weight: bold;
            width: 40px;
            color: #31326F;
        }
        
        .rank.gold { color: #FFD700; }
        .rank.silver { color: #C0C0C0; }
        .rank.bronze { color: #CD7F32; }
        
        .participant-info {
            flex: 1;
            margin-left: 15px;
        }
        
        .participant-name {
            font-weight: bold;
            font-size: 1.1em;
            color: #333;
            margin-bottom: 8px;
        }
        
        .participant-stats {
            font-size: 0.9em;
            color: #666;
            line-height: 1.6;
        }
        
        .participant-stat-line {
            margin-bottom: 3px;
        }
        
        .participant-progress-section {
            margin-top: 15px;
        }
        
        .progress-bar {
            flex: 1;
            height: 25px;
            background: #e9ecef;
            border-radius: 12px;
            overflow: visible;
            margin: 0 15px;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4FB7B3, #A8FBD4);
            border-radius: 12px;
            transition: width 0.3s ease;
        }
        
        .progress-percentage {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            font-size: 0.9em;
            color: #333;
        }
        
        .progress-percentage.negative {
            color: #dc3545;
            font-weight: bold;
        }
        
        .progress-percentage.positive {
            color: #28a745;
            font-weight: bold;
        }
        
        .progress-fill.negative {
            background: #dc3545 !important;
        }
        
        .medal-count {
            display: flex;
            gap: 15px;
            align-items: center;
            font-size: 0.95em;
            margin-top: 10px;
        }
        
        .medal-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .medal-icon {
            font-size: 1.3em;
        }
        
        .olympic-table {
            margin-top: 30px;
        }
        
        .olympic-row {
            display: grid;
            grid-template-columns: 50px 1fr 80px 80px 80px;
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
            align-items: center;
        }
        
        .olympic-row.header {
            font-weight: bold;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 5px;
        }
        
        .olympic-row:not(.header):hover {
            background: #f8f9fa;
        }
        
        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .chart-container h2 {
            color: #31326F;
            margin-bottom: 20px;
            font-size: 1.55em;
        }
        
        .data-entry {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .data-entry h2 {
            color: #31326F;
            margin-bottom: 20px;
            font-size: 1.55em;
        }
        
        .entry-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .entry-field {
            display: flex;
            flex-direction: column;
        }
        
        .entry-field label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        
        .entry-field input {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.2s;
        }
        
        .entry-field input:focus {
            outline: none;
            border-color: #4FB7B3;
        }
        
        .button {
            background: linear-gradient(135deg, #4FB7B3, #31326F);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s;
            margin-right: 10px;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .button.secondary {
            background: #6c757d;
        }
        
        .button.secondary:hover {
            background: #5a6268;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        #fileInput {
            display: none;
        }
        
        .podium {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 20px;
            margin: 30px 0;
            padding: 20px;
        }
        
        .podium-place {
            text-align: center;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            min-width: 150px;
        }
        
        .podium-place.first {
            order: 2;
            transform: scale(1.1);
        }
        
        .podium-place.second {
            order: 1;
        }
        
        .podium-place.third {
            order: 3;
        }
        
        .podium-medal {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .podium-name {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
            color: #333;
        }
        
        .podium-medals {
            display: flex;
            justify-content: center;
            gap: 5px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèÜ HUHLU V√ùZVA 2025 üèÜ</h1>
            <p>22 t√Ωdn≈Ø hubnut√≠ | T√Ωden 3 z 22</p>
        </div>
        
        <div class="bonus-goal">
            üéØ <strong>Bonusov√Ω c√≠l skupiny:</strong> Zhubnou Verƒçu (58,3 kg celkem)
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Celkov√Ω c√≠l</h3>
                <div class="value">-50 kg</div>
            </div>
            <div class="stat-card">
                <h3>Zhubnuto celkem</h3>
                <div class="value">-5.2 kg</div>
            </div>
            <div class="stat-card">
                <h3>Pr≈Ømƒõr t√Ωdne</h3>
                <div class="value">-1.73 kg</div>
            </div>
            <div class="stat-card">
                <h3>Postup c√≠le</h3>
                <div class="value">10.4%</div>
            </div>
        </div>
        
        <div class="leaderboard">
            <h2>üèÖ Olympijsk√© hodnocen√≠</h2>
            <p style="color: #666; margin-bottom: 20px;">
                ü•á Zlato: Splnil/p≈ôekroƒçil t√Ωdenn√≠ c√≠l | 
                ü•à St≈ô√≠bro: Zhubl, ale pod c√≠lem | 
                ü•â Bronz: P≈ôibral
            </p>
            
            <div id="olympicPodium"></div>
            
            <div class="olympic-table">
                <div class="olympic-row header">
                    <div>Po≈ôad√≠</div>
                    <div>Jm√©no</div>
                    <div style="text-align: center;">ü•á</div>
                    <div style="text-align: center;">ü•à</div>
                    <div style="text-align: center;">ü•â</div>
                </div>
                <div id="olympicTable"></div>
            </div>
        </div>
        
        <div class="leaderboard">
            <h2>üìä ≈Ωeb≈ô√≠ƒçek (% c√≠le splnƒõno)</h2>
            <div id="leaderboardList"></div>
        </div>
        
        <div class="chart-container">
            <h2>üìà V√Ωvoj hubnut√≠</h2>
            <canvas id="progressChart"></canvas>
        </div>
        
        <div class="chart-container">
            <h2>üìä T√Ωdenn√≠ √∫bytek</h2>
            <canvas id="weeklyChart"></canvas>
        </div>
        
        <div class="data-entry">
            <h2>‚ûï Zadat novou v√°hu (T√Ωden 4)</h2>
            <div class="entry-grid" id="entryGrid"></div>
            <div class="button-group">
                <button class="button" onclick="saveWeights()">Ulo≈æit v√°hy</button>
                <button class="button secondary" onclick="downloadHTML()">üì• St√°hnout HTML pro GitHub</button>
                <button class="button secondary" onclick="downloadData()">üíæ St√°hnout data (JSON)</button>
                <button class="button secondary" onclick="document.getElementById('fileInput').click()">üìÅ Nahr√°t data (JSON)</button>
                <input type="file" id="fileInput" accept=".json" onchange="uploadData(event)">
            </div>
        </div>
    </div>
    
    <script>
        const participants = [
            { name: 'Annette', goal: -15, weeklyGoal: -0.682, start: 0, color: '#FF6B6B', weeks: [0, 0, -0.6, -1.5] },
            { name: 'Katka', goal: -10, weeklyGoal: -0.455, start: 0, color: '#4ECDC4', weeks: [0, 0.4, 0.4, 0.3] },
            { name: 'Verƒça', goal: -2, weeklyGoal: -0.091, start: 58.3, color: '#FFE66D', weeks: [58.3, 58, 58.7, 58] },
            { name: 'Luk√°≈°', goal: -5, weeklyGoal: -0.227, start: 92.8, color: '#95E1D3', weeks: [92.8, 93.2, 92, 91.7] },
            { name: 'Petr', goal: -3, weeklyGoal: -0.136, start: 73, color: '#F38181', weeks: [73, 74, 74, 73.9] },
            { name: 'Stano', goal: -15, weeklyGoal: -0.682, start: 103.5, color: '#AA96DA', weeks: [103.5, 101.8, 100.8, 100.1] }
        ];
        
        function calculateMedals(person) {
            let gold = 0, silver = 0, bronze = 0;
            
            for (let i = 1; i < person.weeks.length; i++) {
                const weeklyChange = person.weeks[i - 1] - person.weeks[i];
                
                if (weeklyChange >= Math.abs(person.weeklyGoal)) {
                    gold++;
                } else if (weeklyChange > 0) {
                    silver++;
                } else {
                    bronze++;
                }
            }
            
            return { gold, silver, bronze };
        }
        
        function compareOlympic(a, b) {
            if (a.gold !== b.gold) return b.gold - a.gold;
            if (a.silver !== b.silver) return b.silver - a.silver;
            return b.bronze - a.bronze;
        }
        
        function renderOlympicRanking() {
            const rankings = participants.map(person => ({
                ...person,
                ...calculateMedals(person)
            })).sort(compareOlympic);
            
            const podium = document.getElementById('olympicPodium');
            const topThree = rankings.slice(0, 3);
            
            if (topThree.length >= 3) {
                podium.innerHTML = `
                    <div class="podium">
                        <div class="podium-place second">
                            <div class="podium-medal">ü•à</div>
                            <div class="podium-name">${topThree[1].name}</div>
                            <div class="podium-medals">
                                ü•á${topThree[1].gold} ü•à${topThree[1].silver} ü•â${topThree[1].bronze}
                            </div>
                        </div>
                        <div class="podium-place first">
                            <div class="podium-medal">ü•á</div>
                            <div class="podium-name">${topThree[0].name}</div>
                            <div class="podium-medals">
                                ü•á${topThree[0].gold} ü•à${topThree[0].silver} ü•â${topThree[0].bronze}
                            </div>
                        </div>
                        <div class="podium-place third">
                            <div class="podium-medal">ü•â</div>
                            <div class="podium-name">${topThree[2].name}</div>
                            <div class="podium-medals">
                                ü•á${topThree[2].gold} ü•à${topThree[2].silver} ü•â${topThree[2].bronze}
                            </div>
                        </div>
                    </div>
                `;
            }
            
            const table = document.getElementById('olympicTable');
            table.innerHTML = '';
            
            // Urƒçen√≠ po≈ôad√≠ s dƒõlen√Ωmi m√≠sty
            let currentRank = 1;
            let i = 0;
            while (i < rankings.length) {
                const person = rankings[i];
                
                // Zjist√≠me, kolik lid√≠ m√° stejn√© medaile
                const tiedGroup = [person];
                for (let j = i + 1; j < rankings.length; j++) {
                    if (person.gold === rankings[j].gold && 
                        person.silver === rankings[j].silver && 
                        person.bronze === rankings[j].bronze) {
                        tiedGroup.push(rankings[j]);
                    } else {
                        break;
                    }
                }
                
                // Vytvo≈ôen√≠ textu po≈ôad√≠
                let rankText;
                if (tiedGroup.length > 1) {
                    const endRank = currentRank + tiedGroup.length - 1;
                    rankText = `${currentRank}-${endRank}.`;
                } else {
                    rankText = `${currentRank}.`;
                }
                
                // Zobraz√≠me v≈°echny lidi na dƒõlen√©m m√≠stƒõ
                tiedGroup.forEach(p => {
                    const div = document.createElement('div');
                    div.className = 'olympic-row';
                    div.innerHTML = `
                        <div style="font-weight: bold; color: #667eea;">${rankText}</div>
                        <div style="font-weight: bold;">${p.name}</div>
                        <div style="text-align: center; font-weight: bold; color: #FFD700;">${p.gold}</div>
                        <div style="text-align: center; font-weight: bold; color: #C0C0C0;">${p.silver}</div>
                        <div style="text-align: center; font-weight: bold; color: #CD7F32;">${p.bronze}</div>
                    `;
                    table.appendChild(div);
                });
                
                // Posuneme currentRank o poƒçet lid√≠ na tomto m√≠stƒõ
                currentRank += tiedGroup.length;
                i += tiedGroup.length;
            }
        }
        
        function calculateProgress(person) {
            const current = person.weeks[person.weeks.length - 1];
            const change = person.start - current;
            // Vr√°t√≠me skuteƒçn√© procento (m≈Ø≈æe b√Ωt z√°porn√©)
            return (change / Math.abs(person.goal)) * 100;
        }
        
        function renderLeaderboard() {
            const sorted = [...participants].sort((a, b) => calculateProgress(b) - calculateProgress(a));
            const list = document.getElementById('leaderboardList');
            
            sorted.forEach((person, index) => {
                const progress = calculateProgress(person);
                const current = person.weeks[person.weeks.length - 1];
                const change = person.start - current;
                
                let rankClass = '';
                let medal = '';
                if (index === 0) { rankClass = 'gold'; medal = 'ü•á'; }
                else if (index === 1) { rankClass = 'silver'; medal = 'ü•à'; }
                else if (index === 2) { rankClass = 'bronze'; medal = 'ü•â'; }
                
                // Zobrazen√≠ startovn√≠ v√°hy
                const startWeight = person.start === 0 ? 'n/a' : `${person.start} kg`;
                
                // Procento c√≠le ze startovn√≠ v√°hy
                let goalPercent = 'n/a';
                if (person.start !== 0) {
                    goalPercent = `${(Math.abs(person.goal) / person.start * 100).toFixed(1)}% start.hmot.`;
                }
                
                // Urƒçen√≠, zda zhubl nebo p≈ôibral
                const isNegative = change < 0;
                const progressText = isNegative ? 
                    `P≈ôibral/a: ${Math.abs(progress).toFixed(1)}%` : 
                    `Splnƒõno: ${progress.toFixed(1)}%`;
                const progressClass = isNegative ? 'negative' : (progress > 0 ? 'positive' : '');
                const fillClass = isNegative ? 'negative' : '';
                
                const div = document.createElement('div');
                div.className = 'participant';
                div.innerHTML = `
                    <div class="participant-header">
                        <div class="rank ${rankClass}">${medal || (index + 1)}</div>
                        <div class="participant-info">
                            <div class="participant-name">${person.name}</div>
                            <div class="participant-stats">
                                <div class="participant-stat-line">Start: ${startWeight}</div>
                                <div class="participant-stat-line">Aktu√°lnƒõ: ${person.start === 0 ? 'n/a' : current + ' kg'}</div>
                                <div class="participant-stat-line">Zmƒõna: ${change.toFixed(1)} kg ${isNegative ? '‚ö†Ô∏è' : '‚úì'}</div>
                                <div class="participant-stat-line">C√≠l: ${person.goal} kg (${goalPercent})</div>
                            </div>
                        </div>
                    </div>
                    <div class="participant-progress-section">
                        <div class="progress-bar">
                            <div class="progress-fill ${fillClass}" style="width: ${Math.min(Math.abs(progress), 100)}%; background: ${person.color}"></div>
                            <div class="progress-percentage ${progressClass}">${progressText}</div>
                        </div>
                    </div>
                `;
                list.appendChild(div);
            });
        }
        
        function renderProgressChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            const weeks = ['Start', 'T√Ωden 1', 'T√Ωden 2', 'T√Ωden 3'];
            
            const datasets = participants.map(person => ({
                label: person.name,
                data: person.weeks,
                borderColor: person.color,
                backgroundColor: person.color + '33',
                tension: 0.4,
                fill: false
            }));
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: weeks,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'V√°ha (kg)'
                            }
                        }
                    }
                }
            });
        }
        
        function renderWeeklyChart() {
            const ctx = document.getElementById('weeklyChart').getContext('2d');
            
            const weeklyChanges = participants.map(person => {
                const week3 = person.weeks[3];
                const week2 = person.weeks[2];
                return week2 - week3;
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: participants.map(p => p.name),
                    datasets: [{
                        label: '√öbytek v t√Ωdnu 3 (kg)',
                        data: weeklyChanges,
                        backgroundColor: participants.map(p => p.color),
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '√öbytek (kg)'
                            }
                        }
                    }
                }
            });
        }
        
        function renderEntryFields() {
            const grid = document.getElementById('entryGrid');
            participants.forEach(person => {
                const div = document.createElement('div');
                div.className = 'entry-field';
                
                // Pro Annette a Katku zad√°v√°me zmƒõnu, pro ostatn√≠ absolutn√≠ v√°hu
                const isChangeMode = person.start === 0;
                const placeholder = isChangeMode ? 'Zmƒõna v√°hy (nap≈ô. -0.5)' : 'V√°ha v kg';
                const label = isChangeMode ? `${person.name} (zmƒõna)` : person.name;
                
                div.innerHTML = `
                    <label>${label}</label>
                    <input type="number" step="0.1" id="weight-${person.name}" placeholder="${placeholder}">
                `;
                grid.appendChild(div);
            });
        }
        
        function saveWeights() {
            let hasData = false;
            
            participants.forEach(person => {
                const input = document.getElementById(`weight-${person.name}`);
                if (input.value) {
                    const value = parseFloat(input.value);
                    
                    // Pro Annette a Katku (start = 0) zad√°v√°me zmƒõnu, pro ostatn√≠ absolutn√≠ v√°hu
                    if (person.start === 0) {
                        // Zmƒõna: nap≈ô. -0.5 znamen√° zhubnout 0.5 kg
                        const currentWeight = person.weeks[person.weeks.length - 1];
                        person.weeks.push(currentWeight + value);
                    } else {
                        // Absolutn√≠ v√°ha
                        person.weeks.push(value);
                    }
                    
                    input.value = '';
                    hasData = true;
                }
            });
            
            if (hasData) {
                // P≈ôekresl√≠me v≈°echny grafy a tabulky
                refreshDisplay();
                alert('‚úÖ V√°hy ulo≈æeny a grafy aktualizov√°ny!\n\nüí° Nezapome≈à st√°hnout data, abys o nƒõ nep≈ôi≈°el!');
            } else {
                alert('‚ö†Ô∏è Pros√≠m zadejte alespo≈à jednu v√°hu.');
            }
        }
        
        function refreshDisplay() {
            document.getElementById('leaderboardList').innerHTML = '';
            document.getElementById('olympicTable').innerHTML = '';
            document.getElementById('olympicPodium').innerHTML = '';
            
            renderOlympicRanking();
            renderLeaderboard();
            
            // Aktualizujeme ƒç√≠slo t√Ωdne v nadpisu
            const currentWeek = participants[0].weeks.length - 1;
            document.querySelector('.header p').textContent = `22 t√Ωdn≈Ø hubnut√≠ | T√Ωden ${currentWeek} z 22`;
            document.querySelector('.data-entry h2').textContent = `‚ûï Zadat novou v√°hu (T√Ωden ${currentWeek + 1})`;
            
            // Aktualizujeme statistiky
            updateStats();
        }
        
        function updateStats() {
            // Celkov√Ω √∫bytek
            let totalLoss = 0;
            participants.forEach(person => {
                const current = person.weeks[person.weeks.length - 1];
                totalLoss += (person.start - current);
            });
            
            // Pr≈Ømƒõrn√Ω t√Ωdenn√≠ √∫bytek
            const weekCount = participants[0].weeks.length - 1;
            const avgWeekly = weekCount > 0 ? totalLoss / weekCount : 0;
            
            // Procento postupu
            const totalGoal = -50;
            const progressPercent = (totalLoss / Math.abs(totalGoal)) * 100;
            
            document.querySelectorAll('.stat-card .value')[1].textContent = `${totalLoss.toFixed(1)} kg`;
            document.querySelectorAll('.stat-card .value')[2].textContent = `${avgWeekly.toFixed(2)} kg`;
            document.querySelectorAll('.stat-card .value')[3].textContent = `${progressPercent.toFixed(1)}%`;
        }
        
        function downloadData() {
            const data = {
                version: '1.0',
                lastUpdated: new Date().toISOString(),
                participants: participants
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `huhlu-vyzva-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(url);
        }
        
        function downloadHTML() {
            // Z√≠sk√°me cel√Ω HTML k√≥d str√°nky
            const htmlContent = document.documentElement.outerHTML;
            
            // Aktualizujeme data v HTML k√≥du
            const updatedHTML = htmlContent.replace(
                /const participants = \[[\s\S]*?\];/,
                `const participants = ${JSON.stringify(participants, null, 12)};`
            );
            
            // Vytvo≈ô√≠me soubor ke sta≈æen√≠
            const blob = new Blob([updatedHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `index.html`;
            link.click();
            
            URL.revokeObjectURL(url);
            
            alert('‚úÖ HTML soubor sta≈æen!\n\nüì§ Nahraj ho na GitHub a p≈ôepi≈° star√Ω soubor.');
        }
        
        function uploadData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Validace dat
                    if (!data.participants || !Array.isArray(data.participants)) {
                        throw new Error('Neplatn√Ω form√°t dat');
                    }
                    
                    // Naƒçteme data
                    data.participants.forEach((savedPerson, index) => {
                        if (participants[index] && savedPerson.name === participants[index].name) {
                            participants[index].weeks = savedPerson.weeks;
                        }
                    });
                    
                    // P≈ôekresl√≠me v≈°e
                    refreshDisplay();
                    
                    alert('‚úÖ Data √∫spƒõ≈°nƒõ nahr√°na!');
                } catch (error) {
                    alert('‚ùå Chyba p≈ôi naƒç√≠t√°n√≠ dat: ' + error.message);
                }
            };
            reader.readAsText(file);
            
            // Reset file input
            event.target.value = '';
        }
        
        renderOlympicRanking();
        renderLeaderboard();
        renderProgressChart();
        renderWeeklyChart();
        renderEntryFields();
    </script>
</body>
</html>